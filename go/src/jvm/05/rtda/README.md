# 运行时数据区
## 多线程共享的运行时数据区
- 虚拟机启动时创建，退出时销毁
- 多线程共享的运行时数据区主要存放两类数据：类数据和类实例数据
    - 类数据存放在方法区中
    - 类实例数据存放在堆中


## 线程私有的运行时数据区
- 创建线程时创建，线程退出时销毁
- 线程私有的运行时数据区，用于辅助执行 Java 字节码
- 每个线程都有自己的 pc 寄存器和 Java 虚拟机栈

### Java 虚拟机栈

#### 栈帧
- Java 虚拟机栈由栈帧构成，栈帧中保存方法执行的状态，包括局部变量表和操作数栈等
- 执行方法所需的局部变量表大小和操作数栈深度是由编译器预先计算好的，存储在 class 文件的 method_info 结构的 Code 属性中
- 操作数栈和局部变量表只存放数据的值，并不记录数据类型
- 在任一时刻，某一线程肯定是在执行某个方法
    - 这个方法叫做该线程的当前方法
    - 执行该方法的帧，叫做线程的当前帧
    - 声明该方法的类叫做当前类
    - 如果当前方法是 Java 方法，则 pc 寄存器中存放当前正在执行的 Java 虚拟机指令的地址
    - 如果当前方法是本地方法，则 pc 寄·存器中的值没有明确定义
    
#### 局部变量表
- 局部变量表的索引，以 uint8 的形式存储于字节码中
    - `加载类指令、存储类指令、ret 指令和 iinc 指令` 需要按索引访问局部变量表（默认使用的索引宽度为 1 个字节）
    - 对于大多数方法来说，局部变量表的索引都不会超过 256，所以用 1 个字节表示索引就足够了
    - 对于少数局部变量表的索引超过 256 限制的方法来说，Java 虚拟机规范定义了  wide 指令来扩展前述指令